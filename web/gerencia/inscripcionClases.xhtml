<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    template="gerenteIndex.xhtml"
    xmlns:p="http://primefaces.org/ui">

    <ui:define name="source">
        <h:form id="formInscripcion">
            <h:outputScript library="js" name="calendar_es.js"  />
            

            <p:outputLabel value="Inscripcion a Clases" />
            <br/>
            

            
            <p:calendar style="font-size: 10px;"   pages="4"   mindate="#{now}" mode="inline"  beforeShowDay="tuesdaysAndFridaysDisabled" locale="es" pattern="dd-MM-yyyy" value="#{claseBean.fechaConsulta}" >
                <p:ajax event="dateSelect" listener="#{claseBean.actualizarDisponibilidad()}" update="formGer:formInscripcion:tablaDisponiblidad" />
            </p:calendar>

            <p:dataTable  id="tablaDisponiblidad" widgetVar="disponibilidadWidget" var="dis"
                          value="#{claseBean.disponibilidadHorariaPorFecha}"
                          style="  border-style: solid; font-weight: 500;  color:slategrey;  border-color: #dbdbdb; border-width: thin; font-size: 14px; color: darkgray; text-align: center;"
                          emptyMessage="sin registros"
                          
                          >

                <f:facet name="header">
                    <p:outputLabel value="#{claseBean.fechaConsultaFormato}" />
                </f:facet>

                <p:column  headerText="Hora inicio">
                    <h:outputText value="#{dis.horario.inicio}" >
                        <f:convertDateTime pattern="HH:mm" />
                    </h:outputText>
                </p:column>
                <p:column  headerText="Hora fin">
                    <h:outputText value="#{dis.horario.fin}"  >
                        <f:convertDateTime pattern="HH:mm" />
                    </h:outputText>
                </p:column>
                <p:column width="80px;" headerText="Vacantes" styleClass="#{dis.cantidadInstructores-dis.cantidadOcupado>0?'highlightTableRowGreen':'highlightTableRow'}">
                    <h:outputText value="#{dis.cantidadInstructores-dis.cantidadOcupado}" />
                </p:column>

                <p:column width="80px;" headerText="Inscribir">
                    <p:commandButton style="font-weight: bold;" disabled="#{dis.cantidadInstructores-dis.cantidadOcupado==0}" icon="ui-icon-pencil" />
                </p:column>

            </p:dataTable> 






            <script type="text/javascript">
                //<![CDATA[
                function tuesdaysAndFridaysDisabled(date)
                {
                    var day = date.getDay();
                    return [(day != 0 && day != 0), '']
                }
                //]]>
            </script> 
        </h:form> 
    </ui:define>



</ui:composition>